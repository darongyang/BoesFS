# 进度同步

## 每周同步

每周同步采用 `本周完成的工作` —`遇到的困难`—`下一步计划`的方式的格式进行记录

### Start ~ 04.08

|        | 本周完成的工作                                                           | 遇到的困难                                                                                                                                                          | 下一步计划                                                                                                                                        |
| ------ | ------------------------------------------------------------------------ | ------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------- |
| 林颀聪 | ①成功编译sandfs内核及LibSandfs；<br />②阅读了LibSandfs源码             | ①未能将Linux的一些机制与LibSandfs源码结合理解，未能完全明白其功能<br />②对serverless了解仍较少                                                                    | ①了解LibSandfs中的Linux机制；<br />②阅读serverless论文                                                                                          |
| 孙赫辰 | ① 调研ebpf及工具链<br /> ② 阅读并分析sandfs-kernel中的bpf部分          | ①对bpf的前端工具以及prog的实现仍不清楚<br /> ②未理解bpf在sandfs中如何起作用                                                                                       | ① 继续阅读kernel中bpf相关代码<br /> ② 搞清楚bpf在sandfs中起作用的流程（如何加载，如何运行到）                                                   |
| 杨大荣 | ①调研项目整体框架。<br />②阅读sandfs的论文。<br />③阅读wrapfs的源码。 | ①团队分头行动，知识融合上存在问题。<br />②不够主动，多主动向导师询问项目问题。<br />③时间不够，投入时间还需要提高。<br />④对整个项目的规划或者阶段ddl还很模糊。 | ①sandfs的使用。<br />②eBPF学习。<br />③完全弄清sandfs全部实现逻辑。<br />④尝试重构sandfs项目为自己的项目，尝试在20.04编译，添加一点新的demo。 |

### 04.09 ~ 04.15

|        | 本周完成的工作                                                                                                                                                                                                                                                                                       | 遇到的困难                                                                                                                                                 | 下一步计划                                                                                                                             |
| ------ | ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ---------------------------------------------------------------------------------------------------------------------------------------------------------- | -------------------------------------------------------------------------------------------------------------------------------------- |
| 林颀聪 | ①阅读了一部分serverless论文；<br />②添加了SandFS读取文件获取安全控制列表的功能；<br />③为了安全控制测试重构了LibSandFS                                                                                                                                                                            | ①不够熟悉linux对进程操作引起的各种机制变化（如capability），重构用户态程序时可能会造成困难；<br />②项目占用时间多导致考研和课内进度过于缓慢，比较焦虑    | 开始构建一个类似于LibSandFS的用户态程序LibBoesfs                                                                                       |
| 孙赫辰 | ① 跟踪调试sandfs，理解eBPF prog 在sandfs中起作用的流程<br /> ② 添加并验证unlink判断功能,增加文档                                                                                                                                                                                                   | ①LibSandfs目录下提供的libbpf不全，造成编写bpf用户态程序比较困难；<br />② 不够熟悉libbpf；<br />③不知道下一步开发方向，是否应该在sandfs上继续开发。      | 编写boesfs的ebpf-helper模块                                                                                                            |
| 杨大荣 | ①学习sandfs中和ebpf相关内容。<br />②和项目导师讨论项目实现细节、实现内容（email、微信、腾讯会议），同时也接触到其他同题目参赛队。<br />③ 研究和摸清了sandfs的使用，总结了其存在的不足，也是本项目改进方向。<br />④基于sandfs论文性能测试方法，实现简单的性能测试脚本，并对sandfs进行了性能复现。 | ①周五晚上才和项目导师进行会议讨论，明确项目进行方向。调研完项目后的一段时间比较迷茫，小组工作重点往项目测试、调研问题、搭建开发环境、添加简单的demo上靠。 | ①完成boesfs的重构。<br /> ②整理一份boesfs-kernel需要拓展的接口清单。<br />③调研其他文件系统性能测试方法，并探索如何实现访问控制验证 |

### 04.16 ~ 04.22

|        | 本周完成的工作                                                                                                                                         | 遇到的困难                                                                                                                                           | 下一步计划                                                                                        |
| ------ | ------------------------------------------------------------------------------------------------------------------------------------------------------ | ---------------------------------------------------------------------------------------------------------------------------------------------------- | ------------------------------------------------------------------------------------------------- |
| 林颀聪 | ①设计了一部分用户态程序的框架，编写了一部分用户态程序的交互界面；<br />②编写了一部分用户态ebpf prog的代码；<br />③写了少量文档                      | ①由于子父进程之间的信息通信较为复杂，子进程相关的代码编写较慢；<br />②关于用户态对ebpf程序的引用管理还未设计出一套清晰的结构；<br />③时间不够；； | ①继续编写完善用户态程序；<br />②在用户态程序结构完全清晰后编写文档                              |
| 孙赫辰 | ①编写boesfs的bpf相关模块<br /> ②合作进行模块化sandfs的ebpf-helper部分 <br />③协商结构体，编写ebpf-helper相关文档                                    | ① 还没验证和字节码程序以及boesfs-kernel的交互；<br />② 还不知道字节码程序和boesfs-kernel是否有新的需求                                             | ① 补充注释、文档；验证交互是否符合预期；<br />② 根据字节码程序以及boesfs-kernel的需求做出修改； |
| 杨大荣 | ①调研访问控制模型 。<br />②写架构设计文档，确定架构，同时确定初复赛目标。<br />③实现BoesFS项目的LKM Supporter部分并输出文档。<br />④完成模块化重构 | ①eBPF版本迭代太快，不同内核版本差异较大，反复变更项目开发环境，浪费一定时间<br /> ②欠下好多比赛记录文档要补上，越积越多。                          | ①整理拓展接口清单。<br />②实现BoesFS文件系统部分并输出文档。<br />③调研性能测试方法            |

### 04.23 ~ 04.29

|        | 本周完成的工作                                                                                                                                                                                                                                                                                                                                                                                                                                                      | 遇到的困难                                                                                                                                                                                                                                                                                                                                                                                                | 下一步计划                                                                                                                                                                       |
| ------ | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | -------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| 林颀聪 | ①基本完成用户态程序交互界面的编写（acl模式未完成），开始编写文档                                                                                                                                                                                                                                                                                                                                                                                                   | ①ACL规则录入部分还未实现；<br />②文档进度缓慢                                                                                                                                                                                                                                                                                                                                                           | ①完善ACL模式，并完成非交互模式的编写；<br />②与Kernel模块和ACL字节码对接                                                                                                       |
| 孙赫辰 | ①补充ebpf_helper文档<br />②编写字节码程序，支持简单acl规则；还未加载验证                                                                                                                                                                                                                                                                                                                                                                                          | ①关于acl程序：现有的policy只是[subject name , object name , read/write/.. , allow/deny]；不知道文件访问是否还有常见的可以作为规则的限制。<br />②关于acl程序：目前，一个model文件只支持单request，单policy，单effect，单matcher。是否需要支持更复杂的acl。比如说多policy，多matcher。<br />③关于libbpf：是否需要修改libbpf，为用户态提供更健全的bpf前端工具。（现在用户态只可以使用libbpf中的部分功能） | ① acl字节码和用户态交互，验证逻辑，有bug改bug。<br />② 如果用户提出新的常见的访问规则，继续修改acl程序 <br />③ 如果验证字节码程序逻辑无误，则尝试修改libbpf                   |
| 杨大荣 | ①开发BoesFS-Kernel模块。已经完成的是：确定和Agent/eBPF Helper和BoesFS的传递数据格式、实现获取绝对路径方法(utils.c)、Agent传来参数解析(parse.c)、日志输出(log.c)、BoesFS对eBPF支持(main.c)、终止异常进程(kill.c)、确定初赛采集API及其采集参数，读内核源码，完全搞懂了调用链<br />②学习lockmem的限制问题，讨论ACL实现及其eBPF Map设计，尝试了几种实现rlimit的方式均以失败告终，最终决定修改rlimit配置文件 写一个kernel.sh，负责修改配置文件和boesfs-kernel.ko的安装 | ①需要和较多的内核源码（VFS、BPF、Security等模块）打交道，源码调用链长且难懂，难度较大。<br />②内核调试比较困难，即使我们采用了内核模块的开发方式，但还是经常会弄崩内核，不得不恢复快照，耽误时间                                                                                                                                                                                                        | ①实现BoesFS-Kernel全部模块，并验证。<br />②和Agent端成功交互并成功跑起 。<br />③开始研究简单的性能测试并进行测试 。<br />④过完五一后，个人开发比重降低，将重点转向写初赛文档 |

### 04.30 ~ 05.06

|        | 本周完成的工作                                                                                                                                                                                                                                                                                                             | 遇到的困难                                                                                                                                                                                                                                                                                                                                                                          | 下一步计划                                                                                                                                                                                          |
| ------ | -------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| 林颀聪 | ①编写了用户态程序使用ACL模式的逻辑并成功编译；<br />②调试并使BoesFS-Agent在开发的内核模块中正常运行（未测试ACL模式）                                                                                                                                                                                                     | ①调试程序时间多，文档编写少；<br />②BoesFS-Agent编写出来鲁棒性不强，用户输错命令可能会段错误                                                                                                                                                                                                                                                                                      | ①编写BoesFS-Agent的开发文档；<br />②与ACL字节码对接，调试检查bug                                                                                                                                  |
| 孙赫辰 |                                                                                                                                                                                                                                                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                     |                                                                                                                                                                                                     |
| 杨大荣 | ①开发BoesFS-Kernel模块剩下的内容。重构了parse.c、重构了超级快的设计和填充逻辑、实现参数采集功能、实现参数采集输出日志功能。<br />②整合BoesFS-Kernel模块各个模块并完成和Agent对接。改bug，通过编译、测试参数采集功能实现正确、和Agent简单对接，编写了简单的字节码程序测试通过 。<br />③调研文件系统性能测试工具filebench | ①文档进度比较落后，需要赶文档进度。<br /> ②项目仓库建设需要加强 。<br />③BoesFS-in-Kernel原定的7个API不满足应用场景需求，可能还需要额外添加几个。同时鲁棒性不强，容易内核空指针导致内核crash。<br /> ④下周开始陆续有课程大项目和期末考试，可用时间降低，会持续很长一段时间 。<br />⑤初赛的功能点已经明确，决赛要实现的内容感觉较少，不够明确，需要进一步和项目导师联系拓展功能 | ①补充BoesFS-Kernel开发文档、写初赛文档 。<br />②完成对BoesFS简单的性能测试工作，输出性能测试文档 。<br />③实现ACL后，写访问控制测试脚本，输出访问测试文档。<br /> ④更新建设好的项目仓库到GitLab |

### 05.07 ~ 05.13

|        | 本周完成的工作                                                                                                                                                                                               | 遇到的困难                                                                                                                                   | 下一步计划                                                                |
| ------ | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ | -------------------------------------------------------------------------------------------------------------------------------------------- | ------------------------------------------------------------------------- |
| 林颀聪 | ①完成BoesFS-Agent的ACL模式和字节码的对接；``②编写BoesFS-Agent的部分开发文档。                                                                                                                              | ①前期对文档编写不熟悉，浪费了一部分时间；``②欠下课内一大堆任务，下周可能天天赶ddl                                                          | ①编写BoesFS-Agent的开发文档。                                            |
| 孙赫辰 | ①完成BoesFS-Agent的ACL模式和字节码的对接；``②编写BoesFS-Check-Module的开发文档。``③写了一些policy示例                                                                                                     | ①下周估计时间严重不足，应该干不了什么事情，ddl巨多；``②acl模块需要丰富或者优化，不知道这是初赛之前做还是初赛之后做                         | ①完善BoesFS-Check-Module文档``②完善BoesFS-in-Kernel的部分文档           |
| 杨大荣 | ①完成BoesFS-in-Kernel模块的部分开发文档。``②完成ACL跑起项目后，实现BoesFS其余部分。终止异常进程、输出审计日志、通过内核模块参数方式来修改rlimit。``③尝试使用filebench和sandfs场景测试boesfs的性能，但失败 | ①遇到了crash的问题，暂时还没定位到问题所在，性能测试卡壳 ``②最近忙不过来，明显时间不够``③访问控制测试的方法不明确，怎么体现我们的控制能力 | ①完成初赛文档 ``②实现对BoesFS的性能测试和访问控制测试``③比赛仓库的建设 |

### 05.14 ~ 05.20

|        | 本周完成的工作                                                                                                                        | 遇到的困难                                                                                                                                                                                                                                                                                                                                                                                                                                                                      | 下一步计划                                          |
| ------ | ------------------------------------------------------------------------------------------------------------------------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | --------------------------------------------------- |
| 林颀聪 | ①研究如何用go加载ebpf；``②编写BoesFS-Agent的部分开发文档。                                                                          | ①作业和实验还没补``完，还要准备期末考，时间很紧                                                                                                                                                                                                                                                                                                                                                                                                                                | ①继续完善开发文档``②继续研究然后将Agent转为go语言 |
| 孙赫辰 | ① 补充了ebpf_helper流程图                                                                                                            | ①时间不足，作业实验实习考试堆在一起                                                                                                                                                                                                                                                                                                                                                                                                                                            | ①继续完善开发文档                                  |
| 杨大荣 | ①定位并修复了上次说的性能测试时crash的bug。（但遇到新bug）``②进行了第一次性能测试，获取到第一批性能数据。（但有问题）``③写开发文档 | ①遇到了新的问题，爆内存（还没定位问题），可能会导致拿到的这批数据又不太准确 ``②同时数据分析上，boesfs比native的性能测试还优秀，暂时无法解释``③个人原因上，本周发烧了三天，然后赶实验、作业和大项目，项目上没有什么工作 ``④小组上，除了我上述原因，赫辰也开始实习，颀聪也赶复习进度，我会和组员协调一下时间，初赛后可能时间会缓一点``⑤最近实验和考试有点多，初赛前可能都抽不太多时间出来，初赛后可能时间会缓和点。初赛前剩下任务：主要是转go + 测试 + 写初赛文档 + 仓库建设 | ①继续性能测试 ``②开发文档、初赛文档``③仓库建设   |

### 05.21 ~ 05.27

|        | 本周完成的工作                                                                                               | 遇到的困难                                                                   | 下一步计划                                                                                                  |
| ------ | ------------------------------------------------------------------------------------------------------------ | ---------------------------------------------------------------------------- | ----------------------------------------------------------------------------------------------------------- |
| 林颀聪 | ①完成BoesFS-Agent设计部分的开发文档；②编写部分访问控制测试脚本（部分完成）；                               | ①正好碰上考试作业密集期，没什么空；                                         | ①协助组长把文档整合起来；②完成访问控制测试脚本并得到测试数据                                              |
| 孙赫辰 | ①本周没有实际进展（主要准备分布式考试和各个DDL）``②讨论acl逻辑改进，写了个临时用于测试的访问控制测试的prog | ①时间不足                                                                   | ①协助性能测试和访问测试``②协助测试文档                                                                    |
| 杨大荣 | ①本周没有实际进展（主要准备分布式考试和各个DDL）``②写BoesFS-in-Kernel开发文档                              | ①比较难和重要的考试和实验密集，没抽出什么时间``②初赛文档进度落后，要加班赶 | ①下一次组会能把第一版初赛文档写出来 ``②性能测试、访问控制测试完成``③录制初赛演示视频``④仓库建设初步完成 |

### 05.28 ~ 06.03

|        | 本周完成的工作 | 遇到的困难 | 下一步计划 |
| ------ | -------------- | ---------- | ---------- |
| 林颀聪 |                |            |            |
| 孙赫辰 |                |            |            |
| 杨大荣 |                |            |            |

## 每日同步

每日同步采用“本日完成的工作”的格式进行记录

2.28-4.1

林

* 调研了serverless技术
* 阅读了sandfs的论文和PPT
* 阅读并分析了libsandfs的代码
* 开始编译sandfs-kernel

孙

* 调研ebpf工具，确定会使用到libbpf,以及bpf原生接口,bpf helper function

杨

* 调研了sandfs-kernel的实现逻辑，和wrapfs的差异
* 阅读并分析了wrapfs的wrapfs.h、dentry.c、mmap.c、main.c部分

4.2

林

* sandfs-Kernel编译至最后一步出现错误，未能解决
* 阅读少部分bpf.c代码，未输出注释

孙

* 阅读并分析部分sandfs-kernel的bpf.c及相关函数. 5个问题. 见ebpf.md

杨

* 阅读并分析了sandfs-kenerl在read、write函数上的实现
* 阅读并分析了wrapfs的super.c、file.c部分

4.3

林

* sandfs-Kernel编译完成但发生错误，重装虚拟机重新编译中
* 阅读少部分bpf.c代码，输出一部分注释

孙

* 解决部分4.2 问题，继续阅读注释sandfs-kernel下的bpf.c. 又有了新问题.见ebpf.md

杨

- 看sandfs论文看完Part1
- wrapfs的lookup.c，有点绕，看了有点久

4.4

林

* 在组长协助下成功完成sandfs-Kernel编译，但LibSandFS编译出错
* 阅读少部分bpf.c代码，在ebpf.md中补充小部分内容

孙

* 继续阅读sandfd-kernel中ebpf相关代码，补充ebpf.md

杨

- 讨论sandfs-kernel的编译

4.5

林

* 请假

孙

* 请假

杨

- 请假

4.6

林

* 在ubuntu 16.04环境下成功编译LibSandFS

孙

* 理解bpf.c的文件作用. 解决之前的问题,整理到ebpf.md;又有了几个新问题,也在ebpf.md

杨

- 请假

4.7

林

* 看了一部分serverless的论文，了解了一部分serverless的特点
* 尝试运行LibSandFS成功

孙

* 请假

杨

- 看了sandfs论文的Part2

4.8

林

* 看了一部分serverless的论文
* 补充了一部分LibSandFS的解释

孙

* 学习qi葱 运行LibSandFS
* 看了一点libSandFS

杨

- 看了sandfs论文Part3

4.9

林

* 进度分享
* 提出了一些LibSandFS中能看懂但不知道目的的点

孙

* 进度分享
* 尝试加调试日志

杨

* 完成sandfs论文阅读

4.10

林

* 阅读一部分severless（FaaS）的论文

孙

* 参与讨论

杨

* 整理了sandfs报告ppt
* 研究sandfs使用及存在问题，并参与讨论
* 参与FaaS需要涉及多少的讨论，总结项目需要实现的内容

4.11

林

* 理解LibSandFS中的namespace
* 收集FaaS平台Linux内核版本资料

孙

* 加一点注释. 遇到问题和困难在ebpf.md.

杨

* 请假

4.12

林

* 安装了Debian 10.13虚拟机作为测试环境
* 书写了boesfs环境搭建文档

孙

* 尝试添加对于unlink的判断. 有待完善. 更新ebpf.md

杨

- 和郑老师提出项目问题
- 列举如果需要拓展sandfs，可能需要拓展的接口列表
- 总结sandfs项目存在的问题

4.13

林

* 成功静态编译boesfs到内核并成功安装

孙

* 添加完善sandfs-unlink文档

杨

* 补充sandfs存在的问题
* 实现性能测试脚本，并基于sandfs完成了性能复现

4.14

林

* 成功模块化编译boesfs并成功安装到内核
* 编写了SandFS安全控制测试的c语言部分

孙

* 改个安全控制bug

杨

* 尝试探索SandFS的安全控制实现
* 和项目导师讨论项目实现内容

4.15

林

* 安装debian 11虚拟机

孙

* 请假

杨

* 阅读项目导师推荐的casbin模型

4.16

林

* 编译5.10.162Linux内核，并修改boesfs使之适配5.10的内核

孙

* 请假

杨

* 请假

4.17

林

* 编写了user自定义的prog的框架和用户态主程序的框架

孙

* 编写boesfs的bpf相关模块,误入歧途导致正确性未知,明天改bug

杨

* 整理第一版项目架构设计文档

4.18

林

* 基本确定用户态主程序的框架
* 合作进行模块化SandFS

孙

* 修改,编译boesfs-bpf.c
* 合作进行模块化SandFS

杨

- 继续写，完成第一版项目架构设计文档
- 完成LKM Supporter

4.19

林

* 基本确定user_prog.c框架
* 重置用户态主程序的框架

孙

* 修改boesfs-bpf.c失败。
* 合作讨论如何修改：由于kernel版本原因，不再支持bpf_register_prog_type，故无法模块化ebpf helper。

杨

- 写LKM Supporter文档

4.20

林

* 修改用户态主程序结构，编写小部分BoesFS-Agent文档

孙

* 编写一部分ebpf_helper.c

杨

- 重构项目框架，区分BoesFS项目的Flexible架构和Normal架构，修改架构文档，最终确定开发环境
- 比赛报名

4.21

林

* 编写了一部分用户态程序的交互界面

孙

* 协商好结构体接口，初步编写完成ebpf_helper.c

杨

- 最终确定了实现内容、初赛目标、复赛目标

4.22

林

* 编写了一部分用户态程序进程管理部分的代码

孙

* 编写部分ebpf_helper.c文档,流程图和表格待补充

杨

- 实现BoesFS支持eBPF的部分，如：超级块结构修改，解析Agent数据，设置prog，运行prog等（参prog.c）

4.23

林

* 调试用户态程序已编写完的部分

孙

* 请假

杨

- 继续完成prog.c。
- 同时调研初赛重点7个vfs函数的原型和调用链，并输出文档
- 编写utils.c，实现由file、path、dentry对象直接获取全路径名，方便后续参数采集实现
- 修改了BoesFS的架构图

4.24

林

* 几乎编写完用户态程序交互部分的代码
* 调试用户态程序已编写完的部分

孙

* 补充ebpf_helper流程图.
* 补充几个函数说明，学习ACL.

杨

- 补充utils.c实现
- 编写log.c，文件系统日志输出的功能增强。但遇到一些难解决的问题，找资料耽误很多时间。

4.25

林

* 用户态程序交互部分安全控制验证成功一次
* 补充用户态程序的细节部分

孙

* 暂时设想了字节码程序的几个map，没放到Code里，几个问题，感觉需要讨论.

杨

- 解决了昨天遇到的问题，成功实现log写入。

4.26

林

* 继续补充用户态程序的细节部分
* 参与会议讨论

孙

* 初步思考map设计
* 参与会议讨论

杨

- 确定API采集参数，补充实现API的文档
- 重构agent参数解析的函数

4.27

林

* 根据前一天的讨论结果修改用户态程序并测试

孙

* 编写acl_kern

杨

- 学习内核关于lockmem的控制相关知识（后续输出到遇到的困难）
- debug sandfs的lockmem未释放的问题，找到原因所在，要实现umount的逻辑。debug了一晚上。。。。

4.28

林

* 编写一部分BoesFS-Agent的文档

孙

* acl 字节码第一版,编译通过,但未加载，因此未验证逻辑. 支持简单的acl。（不支持多种policy多种matcher）
* 明天研究研究用户态加载,感觉加载会遇到问题.

杨

- 实现umount逻辑

4.29

林

* 编写BoesFS-Agent的非交互界面的逻辑并测试

孙

* 尝试修改libbpf,没写makefile,未验证
* 学习老师发的acl博客

杨

- 实现终止异常子进程函数(kill.c)
- 打算补一补文档：会议、QA、遇到的困难、开发文档
- 打算重构agent参数解析，重构超级块实现，定义好参数格式，实现参数采集，写Install.c。
- 今天争取把kernel第一版编译通过

4.30

林

* 编写ACL模型文件的读取代码

孙

* 请假

杨

- 请假

5.1

林

* 编写ACL规则文件的读取代码

孙

* 请假

杨

- 请假

5.2

林

* 尝试编译并修改Agent中ACL部分的代码

孙

* 找到了个华为的交换机相关的acl文档，学习一下。
* 发现自己之前的acl部分考虑不全且有bug，重新思考设计了一版，思路更新在文档中，还未实现，明天开始改代码，预计2天。

杨

- 请假

5.3

林

* 在sandfs的环境下编译通过Agent中ACL部分的代码

孙

* 编写新的acl字节码（与之前主要区别：区分文件和目录，遵循深度优先原则）
* 增添新的helper function. bpf_acl_dfs_path
* 编写简单demo 用于模块对接
* 讨论和调试解决4.11的新bpf类型程序注册问题

杨

- 重构parse.c
- 重构超级块设计，添加新的信息
- 实现七个API参数采集的功能
- 讨论和调试解决ro_after_init问题

5.4

林

* 修改agent中ACL部分代码的细节部分
* 编写少量文档

孙

* acl字节码初步编写完成，逻辑未验证
* 讨论解决demo bug：eBPF栈非法访问
* demo遇到新bug，继续调试

杨

- 集成BoesFS-in-Kernel各个部分，修改第一版bug，编译通过
- 修改第二版bug，能够实现insmod
- 修改第三版bug，能够实现mount
- 讨论字节码栈访问非法的问题

5.5

林

* 研究并解决进入新user namespace后的用户映射问题
* 修改BoesFS-Agent非交互模式中的逻辑并完成在demo上的编译运行

孙

* 调试解决昨天的demo bug：脏字符造成map查询key失败。（通过更新helper function拷贝逻辑解决）
* 补充遇到困难文档，补充Boesfs-in-Kernel文档
* 更新Boesfs-Check-Module文档

杨

- 完成格式化输出日志的功能
- 初步验证了BoesFS-in-Kernel功能大致实现，能够为Agent提供对接
- 调研性能测试方法，学习filebench

5.6

林

* 修改BoesFS-Agent交互模式中的逻辑并完成在demo上的编译运行

孙

* 读了一点fs的acl文档，在reference下
* 几个想法 有待讨论

杨

- 请假

5.7

林

* 请假写计网实验
* 编写一部分acl加载的新逻辑

孙

* 运行最新版的agent和kernel,遇到acl加载问题 debug.

杨

- 请假

5.8

林

* 与ACL字节码对接一部分
* 编写了一部分BoesFS-Agent的文档

孙

* 修改mem_lock 字节码加载成功
* 调试,未调完.

杨

- 写BoesFS-in-Kernel文档

5.9

林

* 调试

孙

* 使用用户态解析，发现bug
* 测试acl逻辑

杨

- 写BoesFS-in-Kernel文档

5.10

林

* 写BoesFS-Agent文档

杨

- 写BoesFS-in-Kernel文档

5.11

林

* 写BoesFS-Agent文档

杨

- 写BoesFS-in-Kernel文档
- 改unlink的Bug
- 修改为失败才输出log日志
- 添加达到指定次数终止进程
- 为内核模块添加参数，修改rlimit配置文件

5.12

林

* 写BoesFS-Agent文档

杨

- 写BoesFS-in-Kernel文档
- 对BoesFS进行性能测试，遇到了crash的bug

5.13

林

* 写BoesFS-Agent文档
* 研究go如何加载ebpf的内容

杨

- 请假

5.14

林

* 请假

杨

- 修复了大批量文件写入遇到的crash bug

5.15

林

* 请假

杨

- 进行性能测试，得到一组性能数据

5.15 - 6.22

①期末考试集中期，准备分布式系统、计算机网络等课业考试，和大型的结课大项目

②准备初赛所需的文档和资料、仓库建设，初赛前不推进开发进度。

6.22

杨

- 进行性能优化，调试解决初赛性能测试遇到的问题，完成两种测试方法，性能开销在9%-10%。

林

- 设计并编写动态调整ACL部分代码

孙

- 请假


6.23

杨

- 基于Fn项目成功部署和运行了FaaS服务

林

- 请假

孙

- 设计如何重写查询规则逻辑，目前认为可以增加代码量，和实现一定程度的优化

6.24

杨

- 思考BoesFS和Serverless的切入点和融合实现

林

- 请假

孙

- 请假

6.25

杨

- 开始整理Kernel所需的全部API清单列表，同步到Kernel开发文档

林

- 继续编写动态调整ACL部分代码

孙

- 编写递归查询逻辑

6.26

杨

- 重新设计了kill的实现，解决了终止异常进程存在的问题
- 问项目导师关于决赛的方向

林

- 继续编写动态调整ACL部分代码

孙

- 继续编写递归查询逻辑


6.27

孙

- 继续编写递归查询逻辑

杨

- 继续分析和整理Kernel所需的API清单

林

- 继续编写动态调整ACL部分代码

6.28

杨

- 分析完所有的inode operations，读内核源码，分析内核调用链

6.29

杨

- 分析file/dentry/file operations的函数

孙

- 继续编写. 初步通过部分编译 逻辑是否无误未知

林

- 调试动态调整ACL部分代码

6.30

杨

- 整理完全部函数原型，确定决赛所需要的全部API列表
- 明天开始开发工作

孙

- 继续编写. 初步通过部分编译 逻辑是否无误未知


林

- 调试动态调整ACL部分代码，功能初步检查没什么问题

7.1

林

- 开会

杨

- 开会

孙

- 开会

7.2

林

- 请假

杨

- 请假

孙

- 请假

7.3

林

- 修改并调试程序使其能在其他位置运行

孙

- 目录树调试

杨

- 请假

7.4

林

- 设计并编写rbac的代码

孙

- 目录树调试，功能无误.

杨

- 请假

7.5

林

- 设计并编写rbac的代码

孙

- 目录树功能转移至字节码
- 新增helper func. 需要重编.

杨

- 请假


7.6 

林

- 调试rbac的代码

孙

- 改进后的父目录规则查询逻辑编译通过，逻辑未测试. 
- 由于接口改动，需要agent改完接口之后再测试.
- 接口改动写在Boesfs-Check-Module.md中

杨

- 完成全部API列表，输出kernel文档
- 实现了statfs、lookup2、iterate三个API

7.7

林

- 调试rbac的代码
- 设计与编写如何修改适配新的父目录规则查询逻辑的代码

杨

- 完成决赛所有的API采集（7->20），并全部进行单元测试通过，BoesFS-in-Kernel部分基本完工

7.8

杨

- 开组会
- 完成read args的api拓展

林

- 设计与编写如何修改适配新的父目录规则查询逻辑的代码

7.9

杨

- 请假

林

- 请假

7.10

杨

- 完成user prog的api拓展
- 还在阅读acl prog部分代码
- 构思参数匹配逻辑实现

林

- 设计与编写如何修改适配新的父目录规则查询逻辑的代码

7.11

杨

- 继续阅读acl prog的代码
- 完成BoesFS api拓展所有功能

林

- 调试适配新的父目录规则查询逻辑的代码
- 补充所有BoesFS api的Agent接口
- 设计Agent的参数匹配逻辑实现



7.12

杨

- 请假

林

- 设计Agent的参数匹配逻辑实现



7.13

杨

- 参数匹配的详细设计
- 开始实现参数匹配的字节码部分，完成简单哈希运算部分

林

- 设计与编写Agent的参数匹配逻辑实现

7.14

杨

- 重新优化简单的哈希运算
- 编写实现哈希运算的eBPF Helper Function，测试初步通过
- 添加args_map，并实现读map进行参数匹配的逻辑，等待和agent对接测试

林

- 设计与编写Agent的参数匹配逻辑实现

7.15

杨

- 开会
- 将参数匹配逻辑添加到主函数中，但是遇到了无法加载的bug

林

- 开会
- 调试Agent的参数匹配逻辑实现

7.16

杨

- 改字节码的bug，调试了比较久，没找到原因，感觉是字节码达到上限爆了。
- 通过合并的方式跑成功了第一版参数匹配的字节码

林

- 调试Agent的参数匹配逻辑实现

7.17

杨

- 和agent对接，测试和调试，跑起了参数匹配逻辑
- 讨论mount的原理
- 测试了一下agent的reload功能

林

- 调试Agent的参数匹配逻辑实现
- 设计并编写Agent的有关参数匹配的rabc功能
- 调整agent的reload功能的bug

7.18

杨

- 请假

林

- 调试Agent的参数匹配逻辑实现
- 设计并编写Agent的有关参数匹配的rabc功能

7.19

杨

- 请假

林

- 设计并编写Agent的有关参数匹配的rabc功能

7.20

杨

- 阅读论文RunD，看完其设计和实现部分

林

- 设计并编写Agent的有关参数匹配的rabc功能

7.21

杨

- 尝试将BoesFS接入Fn项目，在阅读和调试Fn项目，尝试对Fn项目进行去容器化，但Fn体量实在是有点多

林

- 调试Agent的有关参数匹配的rabc功能

7.22

杨

- 阅读论文RunD，看完其测试部分，并整理输出RunD的阅读文档
- 开会

7.23

杨

- 阅读fnproject cli仓库的inspect命令部分

7.24

杨

- 阅读fnproject fn_go仓库的源码

7.25

杨

- 阅读fnproject cli仓库的deploy、start命令部分，并输出文档

7.26

杨

- 分析fnproject fn仓库的agent部分，进行去容器化（注释）动态调试

7.27

杨

- 阅读fnproject fn仓库的源码

7.28

杨

- 继续对fnproject fn仓库的agent部分分析，进行带容器的动态调试，大致了解了整个项目的框架

7.29

杨

- 开会
- 继续对fnproject fn仓库的agent部分分析，进行带容器的动态调试

7.30

杨

- 请假

7.31

杨

- 请假

8.1

杨

- 初步本地跑起了fn faas demo

8.2

杨

- 开始重构fn faas，删除和docker相关的部分

8.3

杨

- 实现本地去容器化版的fn，local faas

8.4

杨

- 实现能运行二进制的基础版boesfs-faas

8.5

杨

- 更新二进制版的boesfs-faas

8.6

杨

- 实现初步接入gofs仓库
- 对boesfs-faas进行初步测试，遇到一些问题

8.7

杨

- 实现kill所有子进程，实现冷热启动，工作目录更换，套接字清理
